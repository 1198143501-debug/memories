# 🎨 童年回忆相册

一个基于 Vue.js 和 Supabase 的现代童年回忆相册应用，支持图片上传、评论、点赞等功能。

## ✨ 功能特性

- 📸 **图片上传**：支持本地图片上传和在线展示
- 💬 **评论系统**：为每个回忆添加评论
- 👍 **点赞功能**：为喜欢的回忆点赞
- 🔄 **数据同步**：自动同步到云端数据库
- 📱 **响应式设计**：适配各种设备屏幕
- 🌓 **离线下载**：支持离线浏览已加载的回忆
- 📊 **时间轴展示**：按年份整理回忆

## 🚀 技术栈

- **前端框架**：Vue 3 + Composition API
- **状态管理**：Pinia
- **路由管理**：Vue Router
- **UI 框架**：原生 CSS + GSAP 动画
- **数据库**：Supabase (PostgreSQL)
- **存储**：IndexedDB (本地) + Supabase Storage (云端)
- **构建工具**：Vite

## 📦 快速开始

### 环境要求

- Node.js >= 18.0.0
- npm 或 yarn

### 安装依赖

```bash
npm install
```

### 环境配置

1. 复制环境变量示例文件：
```bash
cp .env.example .env
```

2. 编辑 `.env` 文件，添加你的 Supabase 配置：
```env
VITE_SUPABASE_URL=你的Supabase项目URL
VITE_SUPABASE_ANON_KEY=你的Supabase匿名密钥
```

### 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:5173 查看应用

### 构建生产版本

```bash
npm run build
```

构建产物将输出到 `dist/` 目录

## 🗂️ 项目结构

```
src/
├── components/          # 可复用组件
│   ├── MemoryCard.vue   # 回忆卡片组件
│   └── UploadZone.vue   # 文件上传组件
├── config/              # 配置文件
│   └── supabase.js      # Supabase 客户端配置
├── router/              # 路由配置
│   └── index.js       # Vue Router 配置
├── stores/              # 状态管理
│   └── memoryStore.js # 回忆数据状态管理
├── views/               # 页面组件
│   ├── Home.vue       # 首页（回忆墙）
│   ├── Detail.vue     # 回忆详情页
│   ├── Timeline.vue   # 时间轴页面
│   └── Upload.vue     # 上传页面
├── App.vue             # 根组件
├── main.js             # 应用入口
└── style.css           # 全局样式
```

## 🔧 核心功能说明

### 数据存储
- **本地存储**：使用 IndexedDB 存储回忆数据，支持离线访问
- **云端同步**：自动同步到 Supabase 数据库
- **媒体文件**：图片存储在 Supabase Storage

### 网络状态
- **在线模式**：自动同步数据到云端
- **离线模式**：使用本地缓存数据，支持基本功能
- **网络检测**：实时监测网络状态变化

### 数据安全
- **行级安全**：Supabase 行级安全策略保护数据
- **匿名访问**：支持匿名用户上传和互动
- **数据验证**：前端和后端双重数据验证

## 🎯 使用说明

### 上传回忆
1. 点击导航栏的"上传回忆"
2. 填写回忆标题、年份和描述
3. 选择本地图片文件
4. 点击"保存回忆"按钮

### 浏览回忆
1. 首页展示所有回忆的卡片墙
2. 点击卡片查看详情
3. 在详情页可以点赞和添加评论
4. 时间轴页面按年份整理回忆

### 互动功能
- **点赞**：点击心形图标为回忆点赞
- **评论**：在回忆详情页输入评论内容
- **分享**：复制回忆链接分享给朋友

## 🐛 常见问题

### 数据丢失问题
- 确保网络连接稳定
- 检查浏览器控制台是否有错误信息
- 验证 Supabase 配置是否正确

### 图片上传失败
- 检查图片文件大小（建议 < 5MB）
- 确认 Supabase Storage 配置正确
- 验证文件类型是否支持

### 离线功能异常
- 清除浏览器缓存后重试
- 检查 IndexedDB 是否被禁用
- 确保在在线状态下至少加载过一次数据

## 🔧 开发指南

### 添加新功能
1. 在相应的目录创建组件或页面
2. 更新路由配置（如需要）
3. 在状态管理中添加相关逻辑
4. 测试功能和边界情况

### 调试技巧
- 使用浏览器开发者工具查看 IndexedDB 数据
- 监控控制台日志了解数据同步状态
- 使用网络面板监控 Supabase API 请求

## 📄 许可证

MIT License - 详见 LICENSE 文件

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 提交规范
- 使用清晰的提交信息
- 添加适当的测试用例
- 更新相关文档

## 📞 联系方式

如有问题或建议，欢迎通过以下方式联系：
- 提交 GitHub Issue
- 发送邮件到项目维护者

---

**享受记录美好回忆的时光！** 🌟