import{u as p}from"./memoryStore-C62C9ihi.js";import{_ as g,r as C,c as k,a as $,b as i,o as a,d as e,t as d,e as _,w as M,n as f,f as h,g as b,h as L,u as x,F as D,i as B,j as R}from"./index-B-LOWIpF.js";const S={class:"media"},z=["src","alt"],N=["src"],V={class:"content"},j={class:"year"},F={class:"story"},H={class:"actions"},I={__name:"MemoryCard",props:{memory:{type:Object,required:!0}},setup(t){const n=t,m=C(!1),r=p(),u=k(()=>r.isLiked(n.memory.id)),y=()=>{window.location.hash=`#/detail/${n.memory.id}`},o=async()=>{await r.likeMemory(n.memory.id)},v=async()=>{window.confirm("ç¡®å®šåˆ é™¤è¿™æ®µæ—¶å…‰å—ï¼Ÿæ“ä½œä¸å¯æ’¤é”€ã€‚")&&await r.deleteMemory(n.memory.id)};return(l,s)=>{const w=$("RouterLink");return a(),i("article",{class:"memory-card",onMouseenter:s[2]||(s[2]=c=>m.value=!0),onMouseleave:s[3]||(s[3]=c=>m.value=!1),onClick:y},[e("div",S,[t.memory.mediaType==="image"?(a(),i("img",{key:0,src:t.memory.mediaUrl,alt:t.memory.title,loading:"lazy"},null,8,z)):(a(),i("video",{key:1,src:t.memory.mediaUrl,preload:"metadata",muted:"",playsinline:"",onMouseenter:s[0]||(s[0]=c=>c.target.play()),onMouseleave:s[1]||(s[1]=c=>c.target.pause())},null,40,N)),s[4]||(s[4]=e("div",{class:"overlay"},null,-1))]),e("div",V,[e("h3",null,d(t.memory.title),1),e("p",j,d(t.memory.year)+" Â· "+d(new Date(t.memory.createdAt).toLocaleDateString()),1),e("p",F,d(t.memory.story),1),e("div",H,[e("button",{class:f(["like",{active:u.value}]),onClick:M(o,["stop"])},d(u.value?"â¤ï¸ å·²å–œæ¬¢":"ðŸ¤ å–œæ¬¢")+" Â· "+d(t.memory.likes),3),_(w,{class:"share",to:{name:"detail",params:{id:t.memory.id}}},{default:h(()=>[...s[5]||(s[5]=[b(" æŸ¥çœ‹ ",-1)])]),_:1},8,["to"]),e("button",{class:"danger",onClick:M(v,["stop"])},"åˆ é™¤")])])],32)}}},T=g(I,[["__scopeId","data-v-69a5ba2d"]]),U={class:"home"},q={class:"hero"},A={class:"sort"},E={key:0,class:"loading"},O={key:1,class:"empty"},G={key:2,class:"masonry"},J={__name:"Home",setup(t){const n=p();L(()=>{n.loadMemories()});const m=k(()=>n.sortedMemories),r=k(()=>n.sortMode),u=y=>{n.sortMode=y};return(y,o)=>{const v=$("RouterLink");return a(),i("section",U,[e("header",q,[o[2]||(o[2]=e("div",null,[e("h1",null,"æ—§æ—¶å…‰å¿«ä¹æµ"),e("p",null,"æŠŠæ—§ç‰©ä¸Žå…‰å½±é‡Œçš„å¿«ä¹çž¬é—´æ”¶é›†åœ¨æ­¤ï¼Œä¸Žåœ¨ä¹Žçš„äººå…±äº«é‚£ä»½æ¸©åº¦ã€‚")],-1)),e("div",A,[e("button",{class:f({active:r.value==="time"}),onClick:o[0]||(o[0]=l=>u("time"))},"æœ€æ–°",2),e("button",{class:f({active:r.value==="heat"}),onClick:o[1]||(o[1]=l=>u("heat"))},"çƒ­åº¦",2)])]),x(n).initialized?m.value.length===0?(a(),i("div",O,[o[4]||(o[4]=e("p",null,"è¿™é‡Œè¿˜ç©ºç€ï¼ŒæŠŠä½ çš„ç¬¬ä¸€ä»½æ—§æ—¶å…‰å¿«ä¹ä¸Šä¼ è¿›æ¥å§ï¼",-1)),_(v,{to:"/upload"},{default:h(()=>[...o[3]||(o[3]=[e("button",null,"é©¬ä¸Šä¸Šä¼ ",-1)])]),_:1})])):(a(),i("div",G,[(a(!0),i(D,null,B(m.value,l=>(a(),R(T,{key:l.id,memory:l},null,8,["memory"]))),128))])):(a(),i("div",E,"æ­£åœ¨å”¤é†’å›žå¿†..."))])}}},Q=g(J,[["__scopeId","data-v-39092fe0"]]);export{Q as default};
